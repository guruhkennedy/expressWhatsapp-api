<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/main.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Favicon -->
    <link rel="shortcut icon" href="https://via.placeholder.com/16/007bff/007bff" type="image/x-icon">
</head>
<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <!-- Brand/logo -->
        <a class="navbar-brand" href="/"><i class="fa fa-gamepad" aria-hidden="true"></i> Gscpriv</a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <!-- Links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/">Kirim user</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/grup">Kirim Grup</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="jumbotron text-center">
        <h1>Scan</h1>
    </div>
    <div class="container d-flex justify-content-center align-items-center">
        <div class="row">
      <div class="col-md-6">
  <h1>WhatsApp API QR</h1>
  <div id="qrcode-container">
	<img src="./assets/loader.gif" alt="loading" id="qrcode" style="width: 250px;">
  </div>
    <div class="container">
        <div class="row">
          <div class="col-sm-4">
            <h3>Panduan</h3>
            <p>1. Scan kode QR berikut dengan aplikasi WhatsApp Kamu</p>
            <p>2. Status akan muncul dibawah apakah sudah connect atau belum</p>
          </div>
      </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.3/socket.io.js" crossorigin="anonymous"></script>
		<script>
            const qrcode = document.getElementById("qrcode");
            const socket = io();
            const logContainer = document.createElement('div');
            document.body.appendChild(logContainer);

            socket.on("qr", src => {
                qrcode.setAttribute("src", src);
                qrcode.setAttribute("alt", "qrcode");
            });
            socket.on("qrstatus", src => {
                qrcode.setAttribute("src", src);
                qrcode.setAttribute("alt", "loading");
            });

            socket.on("log", log => {
                const logMessage = document.createElement('p');
                logMessage.textContent = log;
                logContainer.appendChild(logMessage);
            })
			
		</script>
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
         <script src="assets/js/main.js"></script>
       </body>
       </html>
</body>
</html>